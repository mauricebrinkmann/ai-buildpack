#!/usr/bin/env bash

# This script serves as the
# [**AI Buildpack**](https://github.com/funcf/ai-buildpack)
# detector.
#
# ## Usage
# Compiling an app into a slug is simple:
#
#     $ bin/detect <build-dir> <cache-dir>

BUILD_DIR=$1
BP=$(dirname $(dirname $0))

# Exit early if app is clearly not an AI project that has one of the required files in place:
# (Either a Promptfile or the ai.env with CF_APP_SPEC must be present during staging)
if [ ! -f "${BUILD_DIR}/ai.env" ] && [ ! -f "${BUILD_DIR}/Promptfile" ]; then
  exit 1
fi

echo "ai `cat $BP/VERSION`"
